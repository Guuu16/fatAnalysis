
          
# 肥胖风险因果推断分析系统使用文档

## 项目概述

本项目是一个基于Python的肥胖风险因果推断分析系统，包含多个组件，主要用于分析生活方式行为数据与肥胖风险之间的因果关系，并提供交互式的Web应用程序进行可视化展示和实时风险评估。项目由以下几个主要部分组成：

1. **因果推断分析Web应用**（`causal_analysis_webapp.py`和`causal_analysis_webapp_eng.py`）
2. **增强型肥胖风险分析Jupyter笔记本**（`enhanced_obesity_analysis.ipynb`和`enhanced_obesity_analysis_english.ipynb`）
3. **深入洞察肥胖风险分析Jupyter笔记本**（`unlocking-insights-obesity-risk-analysis.ipynb`）

## 一、因果推断分析Web应用（causal_analysis_webapp.py/causal_analysis_webapp_eng.py）

### 功能概述

这是一个基于Streamlit开发的交互式Web应用程序，提供以下核心功能：

1. **数据概览**：展示数据集基本统计信息、肥胖类型分布、BMI分布和特征相关性分析
2. **因果推断分析**：
   - 倾向性评分匹配(PSM)：评估干预措施对肥胖风险的因果效应
   - 工具变量分析(IV)：使用工具变量解决内生性问题
   - 双重差分分析(DID)：比较干预前后的效果差异
3. **实时风险评估**：根据用户输入的个人信息和生活方式数据，计算肥胖风险评分和等级
4. **干预效果模拟**：模拟不同干预措施（如增加运动频率、改善饮食质量）对目标人群的效果
5. **模型解释**：使用随机森林和SHAP值分析特征重要性，提高模型可解释性

### 技术实现

- **因果推断方法**：倾向性评分匹配、工具变量分析、双重差分分析
- **机器学习模型**：随机森林、逻辑回归
- **可视化工具**：Plotly、Matplotlib、Seaborn
- **Web框架**：Streamlit

## 二、增强型肥胖风险分析笔记本（enhanced_obesity_analysis.ipynb/enhanced_obesity_analysis_english.ipynb）

### 功能概述

这是一个Jupyter笔记本，专注于使用轻量级机器学习算法构建可解释的肥胖风险预测模型：

1. **数据加载与初步探索**：加载训练数据、测试数据和原始数据集
2. **高级特征工程**：
   - 生理指标（如BMI）
   - 行为风险评分系统（饮食风险、运动风险、生活方式风险）
   - 综合行为风险评分
   - 生活方式类型分类
   - 交互特征
3. **行为数据可视化分析**：分析生活方式行为与肥胖风险的关系
4. **轻量级模型构建与比较**：
   - 逻辑回归：简单易懂，系数可解释
   - 决策树：可视化决策路径
   - 朴素贝叶斯：快速训练，适合小数据集

### 技术实现

- **特征工程**：深度挖掘行为数据价值
- **轻量级模型**：逻辑回归、决策树、朴素贝叶斯
- **模型解释**：特征重要性分析、决策路径可视化
- **结构化输出**：预测报告和个性化建议

## 三、深入洞察肥胖风险分析笔记本（unlocking-insights-obesity-risk-analysis.ipynb）

### 功能概述

这是一个更全面的数据分析和建模笔记本，使用更高级的机器学习模型：

1. **数据加载与概览**：加载并合并训练数据、测试数据和原始数据
2. **数据预处理**：处理缺失值、重复值等
3. **高级模型构建**：
   - LightGBM分类器
   - CatBoost分类器
   - 集成方法（投票分类器）
4. **模型优化**：使用Optuna进行超参数调优

### 技术实现

- **高级模型**：LightGBM、CatBoost、集成学习
- **超参数优化**：Optuna
- **数据可视化**：Plotly、Seaborn

## 如何在论文中引用

### 1. 项目整体引用

在论文的方法部分，您可以这样描述：

> 本研究开发了一个基于Python的肥胖风险因果推断分析系统，该系统整合了多种因果推断方法（包括倾向性评分匹配、工具变量分析和双重差分分析）和机器学习技术，用于分析生活方式行为数据与肥胖风险之间的因果关系。系统包含交互式Web应用程序，可进行实时风险评估和干预效果模拟，为个性化健康管理提供决策支持。

### 2. 因果推断分析部分引用

在讨论因果推断方法时：

> 为了解决观察性数据中的内生性问题和选择偏差，本研究应用了多种因果推断方法。我们使用倾向性评分匹配(PSM)来平衡处理组和对照组之间的协变量差异，使用工具变量分析(IV)处理不可观测的混杂因素，并通过双重差分分析(DID)评估干预措施的时间效应。这些方法的实现基于Python的causalml库，并通过Streamlit框架构建了交互式可视化界面。

### 3. 特征工程部分引用

在讨论特征工程时：

> 本研究通过深度挖掘行为数据，构建了一套全面的特征工程系统，包括生理指标计算、行为风险评分系统、生活方式类型分类和特征交互分析。特别是，我们开发了饮食风险评分、运动风险评分和生活方式风险评分三个维度的评估体系，并将其整合为综合行为风险评分，为肥胖风险预测提供多维度的行为特征。

### 4. 模型构建部分引用

在讨论模型构建时：

> 本研究采用了两种建模策略：一是使用轻量级机器学习算法（如逻辑回归、决策树和朴素贝叶斯）构建高可解释性模型；二是使用高级集成学习方法（如LightGBM和CatBoost）构建高性能预测模型。通过比较不同模型的性能和解释性，我们发现轻量级模型在可解释性和实用性方面具有优势，而集成学习方法在预测准确性方面表现更佳。

### 5. 实时风险评估系统引用

在讨论应用系统时：

> 基于因果推断分析和机器学习模型，我们开发了一个实时肥胖风险评估系统，该系统可根据用户输入的个人信息和生活方式数据，计算肥胖风险评分和等级，并提供个性化的健康建议。此外，系统还包含干预效果模拟模块，可预测不同干预措施对目标人群的潜在效果，为公共卫生干预策略提供决策支持。

## 结论

本项目通过整合因果推断方法和机器学习技术，构建了一个全面的肥胖风险分析系统，不仅能够预测肥胖风险，还能评估不同干预措施的因果效应，为个性化健康管理和公共卫生干预提供科学依据。项目的代码和文档可作为相关研究的基础框架，支持进一步的扩展和应用。
        